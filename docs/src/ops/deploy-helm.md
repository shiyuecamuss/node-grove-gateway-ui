---
title: 'Helm 部署'
description: 'NG Gateway Helm 部署指南：推荐的 values 组织方式、资源配置、探针、升级与回滚策略。'
---

# Helm 部署

本章聚焦生产可用的 Helm 部署最佳实践：资源边界、探针、滚动升级、回滚、以及配置与证书的管理方式。

## 推荐的部署心智模型

- 网关是 **有状态边缘工作负载**：配置与证书是关键资产
- 负载以 I/O 为主：资源瓶颈常见于网络抖动、平台限流、队列背压

## values 组织建议

- `gateway.toml` 作为 ConfigMap/Secret 挂载（按敏感度拆分）
- TLS 证书与私钥使用 Secret 挂载
- 对队列容量、批量参数、超时与重试策略提供显式 values

## 资源配置

- 设置 `requests/limits`，避免节点资源争用导致抖动
- 对高吞吐场景，优先保证 CPU 与网络带宽

## 探针与健康检查

- liveness：进程是否可用
- readiness：北向连接/关键依赖是否 ready（避免未就绪就接流量）

## 升级与回滚

- 推荐滚动升级 + 最大不可用实例数控制
- 升级前先做配置与证书的版本化（可回滚）

## 下一步阅读

- [`Metrics 与可观测性`](./metrics.md)：部署后如何观测容量与瓶颈
