---
title: 'CJT188 地址 / 表具类型 / DI'
description: 'CJ/T 188 设备地址的 14 位 hex 结构、表具类型范围（2004/2018），以及 DI 的填写与解码策略。'
---

## 1) 设备地址（Device.address）

驱动要求：

- `address` 为 **14 位十六进制字符串**
- 格式：`类型(2 hex) + 逻辑地址(12 hex)`

其中“类型”用于区分水/热/燃气/电等（并与版本相关）：

- V2004：标准类型通常为 0x10/0x20/0x30/0x40（水/热/燃气/电）
- V2018：在此基础上扩展了更丰富的类型码段

> 如果现场只提供 12 位逻辑地址，请先确认表具类型码；当前驱动按 14 位解析，缺少类型会直接报配置错误。

## 2) DI（Point.di）

驱动 UI 以 4 位 hex（2 字节）表达 DI（例如 `901F`）。

实践建议：

- 以厂家手册/主站工具为准
- 如读不到值，优先确认：
  - DI 是否需要按“小端”呈现（不同资料表达差异）
  - 该 DI 在 2004/2018 版本下是否有效

## 3) decimals 与 scale

数值类点位的解码流程：

1. BCD payload → 按 `decimals` 解码为 f64
2. 按 `data_type` 强制转换
3. 应用 `scale`（如设置）

建议：

- `decimals` 表达“BCD 小数位”
- `scale` 表达“工程换算因子”

## 4) 阀控/机电同步等特殊动作

某些动作 DI 会触发特定编码策略（见 `@ng-gateway-southward/cjt188/src/codec.rs`）：

- 阀控：bool → 0x55/0x99
- 机电同步：数值 + 表具类型 → BCD + 单位码

当你需要这类动作时，建议把它们封装为 Action，并在文档/命名中明确语义（避免误操作）。


