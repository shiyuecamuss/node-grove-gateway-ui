---
title: 'CJT188 地址 / 表具类型 / DI'
description: 'CJ/T 188 设备地址的 14 位 hex 结构、表具类型范围（2004/2018），以及 DI 的填写与解码策略。'
---

## 1) 设备地址（Device.address）

驱动将“表类型(T)”与“地址域(A0..A6)”拆分为两个字段（与 CJ/T 188-2018 帧结构一致）：

- **`meterType`**：表类型（T，1 字节，0..=255）
- **`address`**：地址域（A0..A6，7 字节）

### `meterType`（T）

类型码用于区分水/热/燃气/自定义等（并与版本相关）：

- V2004：标准类型通常为 `0x10/0x20/0x30/0x40`
- V2018：扩展为码段：
  - `0x10..=0x19` 水表族（`0x10` 冷水、`0x11` 生活热水、`0x12` 直饮水、`0x13` 中水等）
  - `0x20..=0x29` 热量表族（`0x20` 热量、`0x21` 冷量、`0x22` 热+冷等）
  - `0x30..=0x39` 燃气表族
  - `0x40..=0x49` 自定义表族

### `address`（A6..A0）

地址域由 **7 个字节**组成（A0..A6），每字节通常为 **2 位 BCD**（但现实设备/模拟器也可能使用任意 hex 字节）。

- **驱动配置格式（推荐）**：`address` 使用 **14 位 hex 字符串**，表示 **A6..A0 字节**（高位在前，符合人类直觉），例如：`00000000EE0001`

> 备注：规约定义“低地址在前，高地址在后”是指 **在线路上的 A0..A6 字节顺序**；驱动会在协议编解码阶段自动完成 **A6..A0（配置）↔ A0..A6（线序）** 的转换。

## 2) DI（Point.di）

驱动 UI 以 4 位 hex（2 字节）表达 DI（例如 `901F`）；协议线上按“小端”发送为 `1F 90`。

实践建议：

- 以厂家手册/主站工具为准
- 如读不到值，优先确认：
  - 该 DI 在 2004/2018 版本下是否有效
  - 设备是否需要 SER/SEQ（2018）以及链路层参数是否一致

## 3) decimals 与 scale

数值类点位的解码流程：

1. BCD payload → 按 `decimals` 解码为 f64
2. 按 `data_type` 强制转换
3. 应用 `scale`（如设置）

建议：

- `decimals` 表达“BCD 小数位”
- `scale` 表达“工程换算因子”

## 4) 阀控/机电同步等特殊动作

某些动作 DI 会触发特定编码策略（见 `@ng-gateway-southward/cjt188/src/codec.rs`）：

- 阀控：bool → 0x55/0x99
- 机电同步：数值 + 表具类型 → BCD + 单位码

当你需要这类动作时，建议把它们封装为 Action，并在文档/命名中明确语义（避免误操作）。


